<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>16Motorbikes - ì˜¤í† ë°”ì´ ì·¨í–¥ í…ŒìŠ¤íŠ¸</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');

    :root {
      --background: #0F172A;
      --card-bg: #1E293B;
      --accent: #3B82F6;
      --text-primary: #F1F5F9;
      --text-secondary: #94A3B8;
      --hover-color: #2563EB;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: var(--background);
      color: var(--text-primary);
      line-height: 1.7;
      overflow-x: hidden;
      min-height: 100vh;
    }

    .header {
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(148, 163, 184, 0.1);
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
    }

    .nav-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.25rem 2rem;
      max-width: 1280px;
      margin: 0 auto;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .main-container {
      min-height: 100vh;
      padding: 6rem 2rem 2rem;
      max-width: 800px;
      margin: 0 auto;
    }

    .progress-section {
      margin-bottom: 2rem;
    }

    .progress-bar {
      width: 100%;
      height: 4px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    .progress-fill {
      height: 100%;
      background: var(--accent);
      transition: width 0.3s ease;
    }

    #progress {
      text-align: center;
      font-size: 1.2rem;
      color: var(--text-secondary);
    }

    .question {
      display: none;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      background: var(--card-bg);
      padding: 2rem;
      border-radius: 1rem;
      border: 1px solid rgba(148, 163, 184, 0.1);
      margin-bottom: 1rem;
    }

    .question.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .question h3 {
      font-size: 1.8rem;
      margin-bottom: 2rem;
      text-align: center;
      color: var(--text-primary);
    }

    .input-group {
      display: flex;
      gap: 1rem;
      align-items: center;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .input-group input {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid transparent;
      border-radius: 8px;
      padding: 0.75rem 1rem;
      color: var(--text-primary);
      font-size: 1.1rem;
      width: 200px;
      transition: all 0.3s ease;
    }

    .input-group input:focus {
      outline: none;
      border-color: var(--accent);
    }

    .input-group span {
      color: var(--text-primary);
    }

    .option-container {
      display: grid;
      gap: 1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .option-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid transparent;
      border-radius: 8px;
      padding: 1rem;
      color: var(--text-primary);
      text-align: left;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .option-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: var(--accent);
      transform: translateY(-2px);
    }

    .option-btn.selected {
      background: var(--accent);
      border-color: var(--accent);
    }

    .multiple-select {
      display: grid;
      gap: 1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .select-item {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid transparent;
      border-radius: 8px;
      padding: 1rem;
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .select-item:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: var(--accent);
      transform: translateY(-2px);
    }

    .select-item.selected {
      background: var(--accent);
      border-color: var(--accent);
    }

    .error {
      color: #ff4444;
      font-size: 0.9rem;
      text-align: center;
      margin-top: 0.5rem;
      display: none;
    }

    #finalSubmitBtn {
      width: 100%;
      max-width: 600px;
      margin: 2rem auto 0;
      display: none;
      background: var(--accent);
      color: var(--text-primary);
      border: none;
      border-radius: 8px;
      padding: 1rem;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    #finalSubmitBtn:hover {
      background: var(--hover-color);
      transform: translateY(-2px);
    }

    button {
      font-family: 'Noto Sans KR', sans-serif;
    }

    .button-container {
      display: flex;
      justify-content: flex-start;
      margin-top: 1.5rem;
      padding: 0 1rem;
    }

    .back-button {
      background: transparent;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      font-size: 1rem;
      padding: 0.5rem 1rem;
      transition: all 0.3s ease;
      display: none;
    }

    .back-button:hover {
      color: var(--text-primary);
    }

    /* 2ë²ˆ ì§ˆë¬¸ë¶€í„° ì´ì „ ë²„íŠ¼ í‘œì‹œ */
    #q2 .back-button,
    #q3 .back-button,
    #q4 .back-button,
    #q5 .back-button,
    #q6 .back-button,
    #q7 .back-button {
      display: block;
    }
  </style>
</head>
<body>
<header class="header">
  <nav class="nav-content">
    <a href="/" class="logo">
      ğŸï¸ 16MOTORBIKES
    </a>
  </nav>
</header>

<form th:action="@{/resultPage}" th:object="${boardForm}" method="POST" class="main-container">
  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

  <div class="progress-section">
    <div class="progress-bar">
      <div id="progressFill" class="progress-fill" style="width: 14.28%"></div>
    </div>
    <div id="progress">
      <span id="currentStep">1</span> / <span id="totalSteps">7</span>
    </div>
  </div>

  <div id="q1" class="question active">
    <h3>ë‹¹ì‹ ì´ ë°”ì´í¬ êµ¬ë§¤ì— íˆ¬ì ê°€ëŠ¥í•œ ë¹„ìš©ì€?</h3>
    <div class="input-group">
      <input type="number" id="costInput" th:field="*{question1}" placeholder="ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”" min="1">
      <span>ë§Œì›</span>
      <button type="button" onclick="handleCostSubmit()">ì™„ë£Œ</button>
    </div>
    <div id="budgetError" class="error">ìœ íš¨í•œ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
  </div>

  <div id="q2" class="question">
    <h3>ë‹¹ì‹ ì˜ ë°”ì´í¬ ì£¼í–‰ ëª©ì ì€?</h3>
    <div class="option-container">
      <button type="button" class="option-btn" onclick="selectOption(2, 'ë™ë„¤ë§ˆì‹¤')">ë™ë„¤ ë§ˆì‹¤ (125cc ë¯¸ë§Œ)</button>
      <button type="button" class="option-btn" onclick="selectOption(2, 'ì¶œí‡´ê·¼')">ì¶œí‡´ê·¼ (125 ~ 350cc)</button>
      <button type="button" class="option-btn" onclick="selectOption(2, 'ì‹œë‚´ë°”ë¦¬')">ì‹œë‚´ë°”ë¦¬ (125 ~ 650cc)</button>
      <button type="button" class="option-btn" onclick="selectOption(2, 'ê·¼êµë°”ë¦¬')">ê·¼êµë°”ë¦¬ (300 ~ 1000cc)</button>
      <button type="button" class="option-btn" onclick="selectOption(2, 'ì¤‘ê±°ë¦¬íˆ¬ì–´')">ì¤‘ê±°ë¦¬ íˆ¬ì–´ (500cc ~)</button>
      <button type="button" class="option-btn" onclick="selectOption(2, 'ì¥ê±°ë¦¬íˆ¬ì–´')">ì¥ê±°ë¦¬ íˆ¬ì–´ (650cc ~)</button>
    </div>
    <div id="q2Error" class="error">ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <div class="button-container">
      <button type="button" class="back-button" onclick="goToPreviousQuestion(2)">â† ì´ì „</button>
    </div>
  </div>

  <div id="q3" class="question">
    <h3>ë‹¹ì‹ ì˜ í‰ê· ì ì¸ ì£¼í–‰ ìŠ¤íƒ€ì¼ì€?</h3>
    <div class="option-container">
      <button type="button" class="option-btn" onclick="selectOption(3, 'ë ˆí”Œë¦¬ì¹´')">ë‚˜ëŠ” ë‚ ì¹´ë¡œìš´ ì½”ë„ˆë§ê³¼ ìŠ¤í¬í‹°í•œ ìì„¸ê°€ ìµœê³ ì•¼</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'í¬ë£¨ì €')">ë‚˜ëŠ” ì‹œíŠ¸ê³ ê°€ ë‚®ê³  í¸ì•ˆí•˜ê²Œ ì•‰ì•„ì„œ í•œì í•œ ë„ë¡œë¥¼ ë”°ë¼ ì—¬ìœ ë¡­ê²Œ ë‹¬ë¦¬ê³ ì‹¶ì–´</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'íˆ¬ì–´ëŸ¬')">ë‚˜ëŠ” ì¥ê±°ë¦¬ íˆ¬ì–´ë¥¼ ì¢‹ì•„í•˜ê³ , ë„‰ë„‰í•œ ìˆ˜ë‚©ê³µê°„ê³¼ í¸ì•ˆí•œ ì‹œíŠ¸ê°€ í•„ìš”í•´</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'ì–´ë“œë²¤ì²˜')">ë‚˜ëŠ” ê³µë„ë„ ì£¼í–‰í•˜ê³  ì‹¶ê³ , ì„ë„ë„ ì£¼í–‰í•˜ë©´ì„œ ì—¬ê¸°ì €ê¸° ëŒì•„ë‹¤ë‹ˆê³ ì‹¶ì–´</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'ë©€í‹°í¼í¬ì¦ˆ')">ë„ì‹¬ ì¶œí‡´ê·¼ë¶€í„°, ì£¼ë§ íˆ¬ì–´ê¹Œì§€ ëª¨ë“ ê±¸ ë”± í•œëŒ€ë¡œ í•´ê²°í•˜ê³ ì‹¶ì–´</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'ë„¤ì´í‚¤ë“œ')">ë„ì‹¬ ì‚¬ì´ë¥¼ ê°€ë¡œì§€ë¥´ë©° ë‚ ê²ƒ ê·¸ëŒ€ë¡œì˜ ë¼ì´ë”©ì„ ì¦ê¸°ê³  ì‹¶ì–´</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'í´ë˜ì‹')">ì˜›ë‚  ë””ìì¸ì´ ì¢‹ê³ , ì—”ì§„ì˜ ê³ ë™ê°ì„ ëŠë¼ë©´ì„œ ì—¬ìœ ìˆê²Œ ì£¼í–‰í•˜ëŠ”ê²Œ ì¢‹ì•„</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'ìŠ¤í¬ë¨ë¸”ëŸ¬')">ì˜¤í”„ë¡œë“œë„ ì¢‹ì€ë° í´ë˜ì‹í•œ ë””ìì¸ì´ ë‚´ ì·¨í–¥ì´ì•¼</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'ì˜¤í”„ë¡œë“œ')">ë‚œ ì‚°ê¸¸ ì–´ë””ë“  ë§ˆìŒëŒ€ë¡œ ë‹¤ë‹ˆê³ , í—˜ë‚œí•œ ì§€í˜•ì„ íƒ€ê³ ì‹¶ì–´</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'ëª¨íƒ€ë“œ')">ë‚œ ë„ì‹¬ì†ì—ì„œ ê°€ë³ê³  ë†’ì€ ì‹œíŠ¸ê³ ë¡œ ì¹˜ê³  ë‚˜ê°€ë©´ì„œ, ì‚° ì†ì—ì„œ ìŠ¤ë¦´ì„ ëŠë¼ê³  ì‹¶ì–´</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'ìŠ¤ì¿ í„°')">ë‚œ ì‹¤ìš©ì„±ê³¼ ê²½ì œì„±ì„ ëª¨ë‘ ê°–ì¶”ê³ , ë¬´ì—‡ë³´ë‹¤ í¸í•œê²Œ ìµœê³ ì•¼</button>
      <button type="button" class="option-btn" onclick="selectOption(3, 'ì¹´í˜ë ˆì´ì„œ')">í´ë˜ì‹í•œ ë©‹ê³¼, ë ˆí”Œë¦¬ì¹´ì™€ ê°™ì€ ìŠ¤í¬í‹°í•œ ì£¼í–‰ì´ ë‚´ ì·¨í–¥ì´ì•¼</button>
    </div>
    <div id="q3Error" class="error">ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <div class="button-container">
      <button type="button" class="back-button" onclick="goToPreviousQuestion(3)">â† ì´ì „</button>
    </div>
  </div>

  <div id="q4" class="question">
    <h3>ë‹¹ì‹ ì˜ í‰ê· ì ì¸ ì£¼í–‰ ì†ë„ëŠ”?</h3>
    <div class="option-container">
      <button type="button" class="option-btn" onclick="selectOption(4, '60km')">ë‚œ ìë™ì°¨ë‘ ë¹„ìŠ·í•œ ì†ë„ë¡œ ë‹¤ë‹ê±°ì•¼ (60 ~ 110km)</button>
      <button type="button" class="option-btn" onclick="selectOption(4, '80km')">êµ­ë„ ì œí•œì†ë„ëŠ” ê·¸ë˜ë„ ë‹¬ë ¤ì•¼ì§€ (80 ~ 120km)</button>
      <button type="button" class="option-btn" onclick="selectOption(4, '100km')">ë‚œ ì„¸ìë¦¬ ìˆ«ìë¡œëŠ” ë‹¬ë¦´ê±°ì•¼ (100 ~ 130km)</button>
      <button type="button" class="option-btn" onclick="selectOption(4, '120km')">100Kmì—ì„œ ì¶”ì›”ì€ ê°€ëŠ¥í•´ì•¼ì§€ (120 ~ 170km)</button>
      <button type="button" class="option-btn" onclick="selectOption(4, '170km')">ë¹ ë¥¸ê±´ ì¢‹ì§€ë§Œ 200ì€ ë¬´ì„œì›Œ (150 ~ 199km)</button>
      <button type="button" class="option-btn" onclick="selectOption(4, '200km')">yì˜ì—­ëŒ€ê¹Œì§€ëŠ” ë‹¬ë¦¬ê³ ì‹¶ì–´ (200 ~ 240km)</button>
      <button type="button" class="option-btn" onclick="selectOption(4, '250km')">ë‚œ yì˜ì—­ ì´ìƒì„ ì›í•´ (250 ~ 299km)</button>
      <button type="button" class="option-btn" onclick="selectOption(4, '250km+')"> y? ë‚˜ëŠ” zì˜ì—­ë„ ë‹¬ë¦´ê±°ì•¼(300 ~ )</button>
    </div>
    <div id="q4Error" class="error">ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <div class="button-container">
      <button type="button" class="back-button" onclick="goToPreviousQuestion(4)">â† ì´ì „</button>
    </div>
  </div>

  <div id="q5" class="question">
    <h3>ë‹¹ì‹ ì˜ í‰ê·  ì£¼í–‰ ê±°ë¦¬ëŠ”?</h3>
    <div class="option-container">
      <button type="button" class="option-btn" onclick="selectOption(5, 'ë™ë„¤')">ë‚œ ë‚´ ë™ë„¤ ì£¼ë³€ì—ì„œë§Œ íƒˆê±°ì•¼ (ì–¸ë”ë³¸, ì¿¼í„°)</button>
      <button type="button" class="option-btn" onclick="selectOption(5, 'ë„ì‹œ')">ë‚œ ë‚´ ë„ì‹œì—ì„œ íƒ€ê³  íˆ¬ì–´ëŠ” ì•ˆë‚˜ê°€ (ì¿¼í„° ë¯¸ë“¤)</button>
      <button type="button" class="option-btn" onclick="selectOption(5, 'ê·¼êµ')">ë‚œ ê·¼êµê¹Œì§€ëŠ” íˆ¬ì–´ ë‹¤ë‹ˆê³  ì‹¶ì–´ (ì¿¼í„° ë¯¸ë“¤ ë¦¬í„° ì˜¤ë²„ë¦¬í„°)</button>
      <button type="button" class="option-btn" onclick="selectOption(5, 'ì¥ê±°ë¦¬')">ë‚œ ì¥ê±°ë¦¬ ìœ„ì£¼ë¡œ ë‹¤ë‹ê±°ì•¼ (ë¯¸ë“¤ ë¦¬í„° ì˜¤ë²„ë¦¬í„°)</button>
    </div>
    <div id="q5Error" class="error">ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <div class="button-container">
      <button type="button" class="back-button" onclick="goToPreviousQuestion(5)">â† ì´ì „</button>
    </div>
  </div>

  <div id="q6" class="question">
    <h3>ë‹¹ì‹ ì´ í¬ë§í•˜ëŠ” í‰ê·  ì£¼í–‰ rpmì€?</h3>
    <div class="option-container">
      <button type="button" class="option-btn" onclick="selectOption(6, '3500')">ë‚œ ì¡°ê¸ˆë§Œ ë‹¹ê²¨ì„œ ì—¬ìœ ë¡­ê²Œ ë‹¤ë‹ê±°ì•¼ (3500rpm)</button>
      <button type="button" class="option-btn" onclick="selectOption(6, '6000')">ê·¸ë˜ë„ ì°¨ 2ë°°ëŠ” ì¨ì•¼ì§€ (6000rpm)</button>
      <button type="button" class="option-btn" onclick="selectOption(6, '10000')">ë‚œ ìš°ì™€ì•™ ê±°ë¦¬ëŠ”ê²Œ ì¢‹ì•„ (10000rpm)</button>
      <button type="button" class="option-btn" onclick="selectOption(6, '10000+')">ë‚˜ëŠ” 10,000rpmì€ ë„˜ê¸°ë©´ì„œ ì§œì•¼ì§€ ì¬ë°Œì„ê±°ê°™ì•„</button>
    </div>
    <div id="q6Error" class="error">ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <div class="button-container">
      <button type="button" class="back-button" onclick="goToPreviousQuestion(6)">â† ì´ì „</button>
    </div>
  </div>

  <div id="q7" class="question">
    <h3>ë‹¹ì‹ ì´ ì¢‹ì•„í•˜ëŠ” ë°”ì´í¬ ì™¸í˜•ì€? (ê°€ì¥ í•„ìš”í•œ ê¸°ëŠ¥ 2ê°œ)</h3>
    <div class="multiple-select">
      <div class="select-item" onclick="toggleSelect(this, 'í† í¬ì¤‘ì‹œ')">ì¶œë ¥ë³´ë‹¤ëŠ” í† í¬ê°€ ë” ì¢‹ì€ ë°”ì´í¬</div>
      <div class="select-item" onclick="toggleSelect(this, 'ë‚®ì€ì‹œíŠ¸')">í‚¤ ì‘ì€ ì‚¬ëŒë„ í¸í•˜ê²Œ íƒˆ ìˆ˜ ìˆëŠ” ë‚®ì€ ì‹œíŠ¸ê³ ë¥¼ ê°€ì§„ ë°”ì´í¬</div>
      <div class="select-item" onclick="toggleSelect(this, 'ê²½ëŸ‰í™”')">ì§ì§„ì„±ë³´ë‹¤ëŠ” ì¡°ì‘ì„±ì´ í¸í•œ ê°€ë²¼ìš´ ë°”ì´í¬</div>
      <div class="select-item" onclick="toggleSelect(this, 'ëŒ€í˜•ë°”ì´í¬')">ì»´íŒ©íŠ¸í•œ ì‚¬ì´ì¦ˆë³´ë‹¤ëŠ” ìš°ëŒí•œ í¬ê¸°ë¥¼ ê°€ì§„ ë°”ì´í¬</div>
      <div class="select-item" onclick="toggleSelect(this, 'ì—°ë¹„ì¤‘ì‹œ')">í¼í¬ë¨¼ìŠ¤ë³´ë‹¤ëŠ” ì¢‹ì€ ì—°ë¹„ë¥¼ ê°€ì§„ ë°”ì´í¬</div>
      <div class="select-item" onclick="toggleSelect(this, 'ëŒ€ìš©ëŸ‰')">í•œë²ˆ ì£¼ìœ í•˜ë©´ ì˜¤ë«ë™ì•ˆ ë‹¬ë¦´ ìˆ˜ ìˆëŠ” í° ì—°ë£Œíƒ±í¬ë¥¼ ê°€ì§„ ë°”ì´í¬</div>
    </div>
    <div id="q7Error" class="error">ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <button type="button" id="finalSubmitBtn" class="final-submit-btn" onclick="submitSurvey(event)" style="display: none;">ì„¤ë¬¸ ì™„ë£Œ</button>
    <div class="button-container">
      <button type="button" class="back-button" onclick="goToPreviousQuestion(7)">â† ì´ì „</button>
    </div>
  </div>

  <input type="hidden" th:field="*{question1}" id="question1Input">
  <input type="hidden" th:field="*{question2}" id="question2Input">
  <input type="hidden" th:field="*{question3}" id="question3Input">
  <input type="hidden" th:field="*{question4}" id="question4Input">
  <input type="hidden" th:field="*{question5}" id="question5Input">
  <input type="hidden" th:field="*{question6}" id="question6Input">
  <input type="hidden" th:field="*{question7}" id="question7Input">
</form>

<script>
  // ì „ì—­ ë³€ìˆ˜ ì„¤ì •
  let selectedItems = [];
  let answers = {
    question1: '',
    question2: '',
    question3: '',
    question4: '',
    question5: '',
    question6: '',
    question7: []
  };

  // ë¬¸í•­ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
  function transitionQuestion(currentQuestion, nextQuestion) {
    if (currentQuestion && nextQuestion) {
      currentQuestion.style.opacity = '0';
      currentQuestion.style.transform = 'translateY(20px)';

      setTimeout(() => {
        currentQuestion.classList.remove('active');
        nextQuestion.classList.add('active');

        setTimeout(() => {
          nextQuestion.style.opacity = '1';
          nextQuestion.style.transform = 'translateY(0)';
        }, 50);
      }, 300);
    }
  }

  // ë¹„ìš© ì…ë ¥ ì²˜ë¦¬ í•¨ìˆ˜
  function handleCostSubmit() {
    const costInput = document.getElementById('costInput');
    const costInputHidden = document.getElementById('question1Input');
    const errorDiv = document.getElementById('budgetError');
    const cost = parseInt(costInput.value);

    if (!cost || cost <= 0 || isNaN(cost)) {
      errorDiv.style.display = 'block';
      costInput.classList.add('error-input');
      return false;
    }

    const costValue = cost.toString();
    answers.question1 = costValue;
    if (costInputHidden) {
      costInputHidden.value = costValue;
    }

    errorDiv.style.display = 'none';
    costInput.classList.remove('error-input');

    const currentQuestion = document.getElementById('q1');
    const nextQuestion = document.getElementById('q2');
    transitionQuestion(currentQuestion, nextQuestion);
    updateProgress(2);
  }

  // ì˜µì…˜ ì„ íƒ ì²˜ë¦¬ í•¨ìˆ˜
  function selectOption(questionNum, value) {
    // ì´ì „ ì„ íƒëœ ì˜µì…˜ì˜ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
    const prevSelected = document.querySelector(`#q${questionNum} .option-btn.selected`);
    if (prevSelected) {
      prevSelected.classList.remove('selected');
    }

    // í˜„ì¬ ì„ íƒëœ ë²„íŠ¼ì— ìŠ¤íƒ€ì¼ ì ìš©
    const selectedBtn = event.target;
    selectedBtn.classList.add('selected');

    answers[`question${questionNum}`] = value;
    const hiddenInput = document.getElementById(`question${questionNum}Input`);
    if (hiddenInput) {
      hiddenInput.value = value;
    }

    const errorDiv = document.getElementById(`q${questionNum}Error`);
    if (errorDiv) {
      errorDiv.style.display = 'none';
    }

    // ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ ì „í™˜
    setTimeout(() => {
      const currentQuestion = document.getElementById(`q${questionNum}`);
      const nextQuestion = document.getElementById(`q${questionNum + 1}`);
      transitionQuestion(currentQuestion, nextQuestion);
      updateProgress(questionNum + 1);
    }, 300);
  }

  // ë‹¤ì¤‘ ì„ íƒ í† ê¸€ í•¨ìˆ˜
  function toggleSelect(element, value) {
    const errorDiv = document.getElementById('q7Error');
    const hiddenInput = document.getElementById('question7Input');

    if (element.classList.contains('selected')) {
      // ì„ íƒ í•´ì œ
      element.classList.remove('selected');
      const index = selectedItems.indexOf(value);
      if (index !== -1) {
        selectedItems.splice(index, 1);
      }
    } else {
      // ìƒˆë¡œìš´ ì„ íƒ
      if (selectedItems.length >= 2) {
        // ì´ë¯¸ 2ê°œê°€ ì„ íƒëœ ê²½ìš°, ì²« ë²ˆì§¸ ì„ íƒ í•­ëª© ì œê±°
        const firstSelected = document.querySelector('.select-item.selected');
        if (firstSelected) {
          firstSelected.classList.remove('selected');
          selectedItems.shift();
        }
      }
      element.classList.add('selected');
      selectedItems.push(value);
    }

    // ì…ë ¥ê°’ ì—…ë°ì´íŠ¸
    answers.question7 = selectedItems;
    if (hiddenInput) {
      hiddenInput.value = selectedItems.join(',');
    }

    // ì—ëŸ¬ ë©”ì‹œì§€ì™€ ì œì¶œ ë²„íŠ¼ í‘œì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸
    errorDiv.style.display = selectedItems.length > 0 ? 'none' : 'block';
    const finalSubmitBtn = document.getElementById('finalSubmitBtn');
    if (finalSubmitBtn) {
      finalSubmitBtn.style.display = selectedItems.length > 0 ? 'block' : 'none';
    }
  }

  // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ í•¨ìˆ˜
  function updateProgress(step) {
    const progress = ((step - 1) / 6) * 100;
    const progressFill = document.getElementById('progressFill');
    const currentStep = document.getElementById('currentStep');

    if (progressFill) {
      progressFill.style.width = `${progress}%`;
    }

    if (currentStep) {
      currentStep.textContent = step;
    }
  }

  // ì„¤ë¬¸ ì œì¶œ í•¨ìˆ˜
  function submitSurvey(event) {
    if (event) {
      event.preventDefault();
    }

    // ëª¨ë“  ë‹µë³€ ê²€ì¦
    let isValid = true;
    for (let i = 1; i <= 6; i++) {
      const answer = answers[`question${i}`];
      if (!answer || answer.trim() === '') {
        const errorDiv = document.getElementById(`q${i}Error`);
        if (errorDiv) {
          errorDiv.style.display = 'block';
        }
        document.getElementById(`q${i}`).classList.add('active');
        isValid = false;
        break;
      }
    }

    // ë§ˆì§€ë§‰ ì§ˆë¬¸(ë‹¤ì¤‘ ì„ íƒ) ê²€ì¦
    if (selectedItems.length === 0) {
      const errorDiv = document.getElementById('q7Error');
      if (errorDiv) {
        errorDiv.style.display = 'block';
      }
      isValid = false;
    }

    if (!isValid) {
      return false;
    }

    // í¼ ì œì¶œ
    const form = document.querySelector('form');
    if (form) {
      form.submit();
    }
  }

  // ì´ì „ ë¬¸í•­ìœ¼ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜
  function goToPreviousQuestion(currentQuestionNum) {
    const currentQuestion = document.getElementById(`q${currentQuestionNum}`);
    const previousQuestion = document.getElementById(`q${currentQuestionNum - 1}`);

    if (currentQuestion && previousQuestion) {
      currentQuestion.style.opacity = '0';
      currentQuestion.style.transform = 'translateY(20px)';

      setTimeout(() => {
        currentQuestion.classList.remove('active');
        previousQuestion.classList.add('active');

        setTimeout(() => {
          previousQuestion.style.opacity = '1';
          previousQuestion.style.transform = 'translateY(0)';
        }, 50);
      }, 300);

      updateProgress(currentQuestionNum - 1);
    }
  }

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
  document.addEventListener('DOMContentLoaded', function() {
    // ë¹„ìš© ì…ë ¥ í•„ë“œì— ì—”í„° í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    const costInput = document.getElementById('costInput');
    if (costInput) {
      costInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          handleCostSubmit();
        }
      });

      // ìë™ í¬ì»¤ìŠ¤
      costInput.focus();
    }

    // ì—ëŸ¬ ë©”ì‹œì§€ ì´ˆê¸°í™”
    const errorDivs = document.querySelectorAll('.error');
    errorDivs.forEach(div => div.style.display = 'none');

    // ì²« ë²ˆì§¸ ì§ˆë¬¸ ì• ë‹ˆë©”ì´ì…˜
    const firstQuestion = document.getElementById('q1');
    if (firstQuestion) {
      setTimeout(() => {
        firstQuestion.style.opacity = '1';
        firstQuestion.style.transform = 'translateY(0)';
      }, 100);
    }

    // ì§„í–‰ë¥  ì´ˆê¸°í™”
    updateProgress(1);

    function goToPreviousQuestion(currentQuestionNum) {
      const currentQuestion = document.getElementById(`q${currentQuestionNum}`);
      const previousQuestion = document.getElementById(`q${currentQuestionNum - 1}`);

      if (currentQuestion && previousQuestion) {
        currentQuestion.style.opacity = '0';
        currentQuestion.style.transform = 'translateY(20px)';

        setTimeout(() => {
          currentQuestion.classList.remove('active');
          previousQuestion.classList.add('active');

          setTimeout(() => {
            previousQuestion.style.opacity = '1';
            previousQuestion.style.transform = 'translateY(0)';
          }, 50);
        }, 300);

        updateProgress(currentQuestionNum - 1);
      }
    }

    // ì˜µì…˜ ë²„íŠ¼ì— í˜¸ë²„ íš¨ê³¼ ì¶”ê°€
    const options = document.querySelectorAll('.option-btn, .select-item');
    options.forEach(option => {
      option.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-2px)';
      });
      option.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
      });
    });
  });


</script>
</body>
</html>